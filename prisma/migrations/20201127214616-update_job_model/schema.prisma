datasource db {
  provider = "postgresql"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

model Job {
  id             Int      @id  @default(autoincrement())
  jid            String   @unique
  applyEmail     String?  @map("apply_email")
  applyUrl       String?  @map("apply_url")
  companyName    String   @map("company_name")
  companyLogoUrl String?  @map("company_logo_url")
  description    String
  epoch          Int
  pinned         Boolean
  salaryCurrency String?   @map("salary_currency")
  salaryMax      Int?      @map("salary_max")
  salaryMin      Int?      @map("salary_min")
  title          String
  locationId     Int      @map("location_id")
  categoryId     Int      @map("category_id")
  location       Location @relation(fields: [locationId], references: [id])
  category       Category @relation(fields: [categoryId], references: [id])
  tags           Tag[]    @relation(references: [id])
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt      @map("updated_at")

  @@index([locationId], name: "locationId")
  @@index([categoryId], name: "categoryId")

  @@map(name: "jobs")
}

model Category {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  jobs      Job[]
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map(name: "categories")
}

model Location {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  jobs      Job[]
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map(name: "locations")
}

model Tag {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  jobs      Job[]    @relation(references: [id])
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map(name: "tags")
}
